{"version":3,"sources":["webpack://stalk/./node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js","webpack://stalk/./node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js"],"names":["javaScriptWorker","typeScriptWorker","WorkerManager","modeId","defaults","_this","this","_modeId","_defaults","_worker","_client","_configChangeListener","onDidChange","_stopWorker","_updateExtraLibsToken","_extraLibsChangeListener","onDidExtraLibsChange","_updateExtraLibs","prototype","dispose","thisArg","_arguments","generator","myToken","proxy","body","f","y","t","g","_","label","sent","trys","ops","next","verb","Symbol","iterator","n","v","op","TypeError","call","done","value","pop","length","push","e","step","__generator","_a","getProxy","updateExtraLibs","getExtraLibs","P","Promise","resolve","reject","fulfilled","rejected","result","then","apply","_getClient","moduleId","keepIdleModels","createData","compilerOptions","getCompilerOptions","extraLibs","customWorkerPath","workerOptions","p","getEagerModelSync","worker","withSyncedResources","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","client","setupTypeScript","setupMode","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","uris","libFiles","languageFeatures"],"mappings":"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","file":"862.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nimport { languages } from './fillers/monaco-editor-core.js';\r\nvar javaScriptWorker;\r\nvar typeScriptWorker;\r\nexport function setupTypeScript(defaults) {\r\n    typeScriptWorker = setupMode(defaults, 'typescript');\r\n}\r\nexport function setupJavaScript(defaults) {\r\n    javaScriptWorker = setupMode(defaults, 'javascript');\r\n}\r\nexport function getJavaScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!javaScriptWorker) {\r\n            return reject('JavaScript not registered!');\r\n        }\r\n        resolve(javaScriptWorker);\r\n    });\r\n}\r\nexport function getTypeScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!typeScriptWorker) {\r\n            return reject('TypeScript not registered!');\r\n        }\r\n        resolve(typeScriptWorker);\r\n    });\r\n}\r\nfunction setupMode(defaults, modeId) {\r\n    var client = new WorkerManager(modeId, defaults);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    var libFiles = new languageFeatures.LibFiles(worker);\r\n    languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\r\n    languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\r\n    languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\r\n    languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\r\n    languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(libFiles, worker));\r\n    languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(libFiles, worker));\r\n    languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\r\n    languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\r\n    languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\r\n    languages.registerCodeActionProvider(modeId, new languageFeatures.CodeActionAdaptor(worker));\r\n    languages.registerRenameProvider(modeId, new languageFeatures.RenameAdapter(worker));\r\n    new languageFeatures.DiagnosticsAdapter(libFiles, defaults, modeId, worker);\r\n    return worker;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { editor } from './fillers/monaco-editor-core.js';\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(modeId, defaults) {\r\n        var _this = this;\r\n        this._modeId = modeId;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._client = null;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n        this._updateExtraLibsToken = 0;\r\n        this._extraLibsChangeListener = this._defaults.onDidExtraLibsChange(function () {\r\n            return _this._updateExtraLibs();\r\n        });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        this._configChangeListener.dispose();\r\n        this._extraLibsChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._updateExtraLibs = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myToken, proxy;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._worker) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        myToken = ++this._updateExtraLibsToken;\r\n                        return [4 /*yield*/, this._worker.getProxy()];\r\n                    case 1:\r\n                        proxy = _a.sent();\r\n                        if (this._updateExtraLibsToken !== myToken) {\r\n                            // avoid multiple calls\r\n                            return [2 /*return*/];\r\n                        }\r\n                        proxy.updateExtraLibs(this._defaults.getExtraLibs());\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        var _this = this;\r\n        if (!this._client) {\r\n            this._worker = editor.createWebWorker({\r\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\r\n                moduleId: 'vs/language/typescript/tsWorker',\r\n                label: this._modeId,\r\n                keepIdleModels: true,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    compilerOptions: this._defaults.getCompilerOptions(),\r\n                    extraLibs: this._defaults.getExtraLibs(),\r\n                    customWorkerPath: this._defaults.workerOptions.customWorkerPath\r\n                }\r\n            });\r\n            var p = this._worker.getProxy();\r\n            if (this._defaults.getEagerModelSync()) {\r\n                p = p.then(function (worker) {\r\n                    if (_this._worker) {\r\n                        return _this._worker.withSyncedResources(editor\r\n                            .getModels()\r\n                            .filter(function (model) { return model.getModeId() === _this._modeId; })\r\n                            .map(function (model) { return model.uri; }));\r\n                    }\r\n                    return worker;\r\n                });\r\n            }\r\n            this._client = p;\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient()\r\n            .then(function (client) {\r\n            _client = client;\r\n        })\r\n            .then(function (_) {\r\n            if (_this._worker) {\r\n                return _this._worker.withSyncedResources(resources);\r\n            }\r\n        })\r\n            .then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n"],"sourceRoot":""}